$(document).ready(function(){function e(){$.ajax({type:"GET",url:t+"resources",beforeSend:function(e){e.setRequestHeader("email",window.localStorage.email),e.setRequestHeader("auth_token",window.localStorage.auth_token),console.log("Loading resources"),$(".resources").append('<div class="progress"><div class="indeterminate"></div></div>')},success:function(e){console.log("Received resources from server: "+e),$(".resources").html(""),$(".resources").append('<div class="row cards" id="masonry-grid"></div>'),$.each(e,function(e,t){$(".cards").prepend('<div class="col s4"><div class="card" id="resource" data-id="'+t._id+'"><div class="card-image waves-effect waves-block waves-light"><img class="activator" style="height: 200px" src="'+t.thumbnail+'"></div><div class="card-content"><span class="card-title activator grey-text text-darken-4 line-clamp" style="line-height: 1.5;"><i class="material-icons right">more_vert</i>'+t.title+'</span><br><br><div id="outer-tags"></div></div><div class="card-reveal"><span class="card-title grey-text text-darken-4"><i class="material-icons right">close</i>'+t.title+"</span><p>"+t.description+'</p><br><div id="inner-tags"></div><br><br><button class="btn waves-effect waves-light edit-resource modal-trigger" href="#edit-resource-modal" type="submit" name="action" id="submit" data-id="'+t._id+'">Edit Tags<i class="material-icons">edit</i></button><br><br><button class="btn waves-effect waves-light delete-resource" type="submit" name="action" id="submit" data-id="'+t._id+'">Delete<i class="material-icons">delete</i></button></div><div class="card-action"><img class="favicon" src="https://www.google.com/s2/favicons?domain='+t.site_name+'"><span class="resource-site_name">'+t.site_name+'</span><a href="'+t.url+'" class="resource-original" target="_blank">Open<i class="material-icons right">open_in_new</i></a></div></div></div>');for(var a=0;a<t.tags.length;a++)t.tags[a]&&($("#outer-tags").append('<div class="chip">'+t.tags[a]+"</div>"),$("#inner-tags").append('<div class="chip">'+t.tags[a]+"</div>"))}),$("#masonry-grid").masonry({columnWidth:".col",itemSelector:".col"})},error:function(e,t,a){window.location.href="login.html"}})}var t="https://project3pockety.herokuapp.com/",a=null;$(function(){window.localStorage.email&&window.localStorage.auth_token?e():window.location.href="register.html"}),$(".modal-trigger").leanModal(),$(".greeting").html("Welcome, "+window.localStorage.email),$(".dropdown-button").dropdown(),$("#login-state").html("Logout").on("click",function(){delete window.localStorage.email,delete window.localStorage.auth_token,window.location.href="register.html"})});